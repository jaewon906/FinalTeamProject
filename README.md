# 프로젝트 :  도서 판매 관리 시스템


## 프론트엔드 

### 프레임워크 : 리액트 18 version
### 라이브러리 : react-router-dom, react-daum-postcode, http-proxy-middleware, axios, react-modal



## 백엔드

### 프레임워크 : 스프링부트 3.1.2
### 라이브러리(프레임워크) : Spring-Security, JPA, mail, validation, modelmapper, jjwt, lombok



## 회원 상세 기능



### 1. 회원가입 완
##### 1) 아이디, 닉네임, 이메일은 유일하게 설정하여 중복 검사를 진행 o
##### 2) 아이디는 최소 6글자에서 12글자, 특수문자 허용하지 않는다. 비밀번호는 최소 8글자에서 15글자, 숫자 영문자 & 특수문자가 반드시 들어가야 한다. 닉네임은 특수문자 제외 4~20글자, 나머지 항목들(주소, 전화번호 등) 또한 양식에 맞게 넣을 수 있도록 한다. o
##### 3) 이메일 인증은 난수 10글자 이상으로 지정하여 사용자가 입력한 이메일로 전송하여 입력값과 일치하면 인증이 가능하도록 한다. o 
##### 4) 인증 시간은 3분으로 주어지고 시간이 초과되면 인증코드가 자동으로 사라진다. 인증을 완료해도 사라진다. o
##### 5) 주소 API를 사용하여 주소를 직접 입력하는 것 보다 검색해서 입력할 수 있도록 한다. o
##### 6) 비밀번호는 BCrypt + salted 활용하여 DB에 암호화해서 저장할 수 있도록 한다. o



### 2. 회원탈퇴 완
##### 1) 회원탈퇴시 유예기간을 지정하기 위해 DELETE_FLAG 컬럼과 DELETE_TIME을 지정한다. 회원탈퇴시 DELETE_FLAG가 Y로 설정된다 o
##### 2) 이때 탈퇴한 시간을 기록한다. o
##### 3) 일정기간 이상 지날 시 테이블에서 완전 삭제한다. o


### 3. 회원정보 수정
##### 1) 회원정보 수정은 먼저 회원정보를 불러오는 뷰를 만들고 회원정보를 가져온다. o
##### 2) 뷰에 회원정보 수정 버튼을 만들어 사용자가 클릭한 후 정보를 수정할 수 있도록 한다. o
##### 3) 회원정보 수정은 앞서서 비밀번호 인증을 먼저 수행하고 진행한다. o
##### 4) 암호 재설정은 고민을 좀 해야함



### 4. 회원권한 부여 및 인증 x
##### 1) 회원가입을 통한 사용자와 관리자의 Role은 각각 USER, ADMIN으로 지정한다. o  
##### 2) USER 권한을 가진 사용자는 본인이 작성한 게시글이나 상품 장바구니, 구매등의 일반적인 서비스를 이용할 수 있다. -> 검증 필요
##### 3) ADMIN 권한을 가진 사용자는 플랫폼의 모든 권한을 위임받는다. -> 검증 필요
##### 4) 인증 절차는 JWT 토큰을 활용한다. 인증된 access토큰과 refresh토큰 두 개가 있어야 서비스에 접근할 수 있도록 한다. o
##### 5) 만약 access토큰이 만료되었을때 인증된 refresh토큰을 가지고 있다면 access토큰을 재발급한다. o
##### 6) 만약 refresh토큰이 만료되었다면 로그인을 다시 해야한다. o



### 5. 로그인 완
##### 1) 로그인 시 아이디와 비밀번호가 일치하면 해당 브라우저의 쿠키에 access토큰과 refresh토큰을 부여한다. o
##### 2) access토큰의 만료기간은 1시간, refresh토큰의 만료기간은 7일로 지정한다. o
##### 3) 성공적으로 로그인 시 해당 이메일로 로그인이 완료되었다는 이메일을 전송한다. o



### 6. 로그아웃 완
##### 1) 로그아웃시 access토큰과 refresh토큰을 회수한다. o



### 7. 아이디 찾기  완
##### 1) 사용자가 이메일값을 보내면 DB에 해당 이메일 값이 있을 때 그 이메일로 난수 8글자의 메일을 전송한다.
##### 2) 사용자는 본인이 입력한 이메일 사이트에 들어가서 해당 난수를 보고 인증을 진행하기 위해 입력한다.
##### 3) 일치하면 사용자 이메일과 같은 튜플에 있는 아이디를 응답 본문에 실어서 전송한다.


### 8. 비밀번호 찾기  완
##### 1) 사용자가 아이디와 이메일값을 보내면 DB에 해당 이메일과 아이디 값이 존재하면서 같은 튜플에 있을 때 그 이메일로 난수 8글자의 메일을 전송한다.
##### 2) 사용자는 본인이 입력한 이메일 사이트에 들어가서 해당 난수를 보고 인증을 진행하기 위해 입력한다.
##### 3) 일치하면 사용자 이메일과 같은 튜플에 있는 사용자 고유 코드를 응답 본문에 실어서 전송하고 비밀번호 변경 페이지로 이동한다.
##### 4) 사용자가 새로운 암호를 입력하면 사용자 고유 코드와 함께 다시 서버로 전송하여 비밀번호를 업데이트한다.



### 개선할 사항
##### ※ 현재 이메일 보내는 속도가 약 5초가 걸리기 때문에 개선필요
##### -> 비동기 처리를 진행했으나 사용자 수가 한정적이기 때문에 성능 향상이 되었는지 확실치 않음
##### ※ 이메일 인증코드 입력과정에서 일정시간 이상 초과되면 인증코드가 만료되면서 다시 인증코드를 전송해야한다.
##### -> 현재 시간 초과시 clearInterval이 동작이 되나 인증을 완료한 후의 clearInterval은 동작하지 않음
##### -> 원인은 setInterval수행 시의 변수값이 그대로임 해당 변수의 값을 변경하는 로직을 짜도 setInterval 내부에서 변수를 콘솔 찍어보면 변하지않음 
##### ※ 회원 수정 페이지에서 아이디, 이메일, 생년월일을 제외한 정보들을 수정할 수 있게 했다
##### -> 회원 수정 페이지에서 암호 재설정 만져야함
